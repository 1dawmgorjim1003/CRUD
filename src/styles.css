/* ==========================================================================
   Spectra UI â€“ Modern, elegant CSS for CRUD apps
   Palette: cool neutrals + eucalyptus accents (professional, calming, elegant)
   Author: ChatGPT (DAW)
   ========================================================================== */

/* -----------------------------
   Cascade Layers
------------------------------*/
@layer reset, tokens, base, components, utilities;

/* -----------------------------
   Reset (modern, minimal)
------------------------------*/
@layer reset {
  *, *::before, *::after { box-sizing: border-box; }
  html:focus-within { scroll-behavior: smooth; }
  html, body { height: 100%; }
  body { margin: 0; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }
  img, picture, video, canvas, svg { display: block; max-width: 100%; }
  input, button, textarea, select { font: inherit; color: inherit; }
  a { color: inherit; text-decoration: none; }
  table { border-collapse: collapse; border-spacing: 0; width: 100%; }
}

/* -----------------------------
   Design Tokens
------------------------------*/
@layer tokens {
  :root {
    /* Neutral foundation */
    --bg:        #f6f7fb;
    --surface:   #ffffff;
    --surface-2: #f0f2f6;
    --elev-1:    0 10px 30px rgba(10, 20, 30, .06);
    --elev-2:    0 16px 40px rgba(10, 20, 30, .10);

    /* Typography */
    --text:      #1f2937;
    --text-soft: #4b5563;
    --text-inv:  #ffffff;

    /* Brand & semantic */
    --primary:   #2e6f6c; /* eucalyptus teal */
    --primary-2: #3b8d89;
    --accent:    #7c5cff; /* periwinkle accent */
    --success:   #2f9e44;
    --warning:   #f59e0b;
    --danger:    #e11d48;

    /* Borders & overlays */
    --border:    #e5e7eb;
    --ring:      color-mix(in oklab, var(--accent) 38%, #0000);
    --glass:     rgba(255,255,255,.7);
    --backdrop:  blur(10px) saturate(140%);

    /* Radii & spacing */
    --r-sm: .6rem;
    --r-md: 1rem;
    --r-lg: 1.4rem;
    --sp-1: .5rem;
    --sp-2: .75rem;
    --sp-3: 1rem;
    --sp-4: 1.5rem;
    --sp-5: 2rem;
    --sp-6: 3rem;

    /* Typography scale (fluid) */
    --step--1: clamp(.86rem, .82rem + .1vw, .95rem);
    --step-0:  clamp(1rem, .96rem + .2vw, 1.125rem);
    --step-1:  clamp(1.25rem, 1.12rem + .6vw, 1.5rem);
    --step-2:  clamp(1.6rem, 1.3rem + 1.4vw, 2rem);
    --step-3:  clamp(2rem, 1.6rem + 2vw, 2.6rem);
    --step-4:  clamp(2.6rem, 2rem + 3vw, 3.4rem);

    /* Timings & Easing */
    --fast: 160ms;
    --base: 260ms;
    --slow: 500ms;
    --ease: cubic-bezier(.2,.8,.2,1);

    /* Accent gradient (animated) */
    --grad: conic-gradient(from var(--spin, 0deg),
             #7c5cff, #2e6f6c, #98c1b2, #7c5cff);
  }

  /* Dark theme (optional): <html data-theme="dark"> */
  html[data-theme="dark"] {
    --bg:        #0f1420;
    --surface:   #101826;
    --surface-2: #0d1320;
    --text:      #e5e7eb;
    --text-soft: #a8b0bd;
    --text-inv:  #0f1420;
    --border:    #1f2a3a;
    --glass:     rgba(16, 24, 38, .6);
    --ring:      color-mix(in oklab, var(--accent) 40%, #0000);
    --elev-1:    0 10px 30px rgba(2,6,23,.5);
    --elev-2:    0 16px 40px rgba(2,6,23,.7);
  }

  /* Register custom property so it can animate smoothly */
  @property --spin {
    syntax: "<angle>";
    inherits: false;
    initial-value: 0deg;
  }
}

/* -----------------------------
   Base
------------------------------*/
@layer base {
  :root { color-scheme: light dark; }
  body {
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    font-size: var(--step-0);
    color: var(--text);
    background: radial-gradient(1200px 1200px at 10% -20%, #dfe6ff40, transparent 70%),
                radial-gradient(1200px 1200px at 110% 20%, #b8f0e440, transparent 70%),
                var(--bg);
    min-height: 100svh;
  }

  h1 { font-size: var(--step-3); letter-spacing: -.02em; }
  h2 { font-size: var(--step-2); letter-spacing: -.01em; }
  h3 { font-size: var(--step-1); }
  p  { line-height: 1.65; color: var(--text-soft); }

  .container {
    width: min(1200px, 92%);
    margin-inline: auto;
    container-type: inline-size;
    container-name: page;
  }

  /* Global focus ring */
  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--ring);
    border-radius: .4rem;
  }

  /* Animated gradient halo utility (applied to brand elements) */
  .halo {
    position: relative;
    isolation: isolate;
  }
  .halo::before {
    content: "";
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    background: var(--grad);
    filter: blur(12px);
    opacity: .6;
    z-index: -1;
    transition: opacity var(--base) var(--ease);
  }
  .halo:hover::before { opacity: .9; }
}

/* -----------------------------
   Components
------------------------------*/
@layer components {

  /* Header/Nav */
  .app-header {
    position: sticky; top: 0; z-index: 50;
    backdrop-filter: var(--backdrop);
    -webkit-backdrop-filter: var(--backdrop);
    background: color-mix(in oklab, var(--surface) 70%, transparent);
    border-bottom: 1px solid var(--border);
  }
  .nav {
    display: flex; align-items: center; gap: var(--sp-4);
    padding: var(--sp-3) 0;
  }
  .brand {
    font-weight: 700; letter-spacing: -.02em;
    display: inline-flex; align-items: center; gap: .6rem;
  }
  .brand-badge {
    width: 32px; height: 32px; border-radius: 8px;
    background: var(--grad);
    animation: spin-grad 14s linear infinite;
  }

  /* Buttons */
  .btn {
    --bgc: var(--primary);
    --bgh: var(--primary-2);
    --txt: var(--text-inv);

    display: inline-flex; align-items: center; justify-content: center; gap: .6rem;
    padding: .7rem 1rem;
    border-radius: .9rem;
    border: 1px solid color-mix(in oklab, var(--bgc) 20%, #0000);
    background: linear-gradient(180deg,
                color-mix(in oklab, var(--bgc) 90%, #fff 10%),
                color-mix(in oklab, var(--bgc) 92%, #000 8%));
    color: var(--txt);
    box-shadow: 0 8px 18px color-mix(in oklab, var(--bgc) 24%, #0000);
    transition: transform var(--fast) var(--ease),
                box-shadow var(--base) var(--ease),
                background var(--base) var(--ease);
    cursor: pointer;
    user-select: none;
  }
  .btn:hover { transform: translateY(-1px); background: linear-gradient(180deg, var(--bgh), color-mix(in oklab, var(--bgh) 86%, #000 14%)); }
  .btn:active { transform: translateY(0); }
  .btn-outline {
    --bgc: var(--surface);
    --txt: var(--primary);
    background: var(--surface);
    color: var(--txt);
    border: 1px solid color-mix(in oklab, var(--primary) 25%, var(--border));
    box-shadow: 0 6px 14px rgba(0,0,0,.05);
  }
  .btn-danger { --bgc: var(--danger); --bgh: color-mix(in oklab, var(--danger) 90%, #000 10%); }
  .btn-warning{ --bgc: var(--warning); --bgh: color-mix(in oklab, var(--warning) 90%, #000 10%); }
  .btn-ghost {
    background: transparent; border: 1px dashed var(--border); color: var(--text-soft);
  }

  /* Cards */
  .card {
    position: relative;
    border-radius: var(--r-lg);
    background: var(--surface);
    box-shadow: var(--elev-1);
    border: 1px solid var(--border);
    overflow: clip;
    transition: box-shadow var(--base) var(--ease), transform var(--base) var(--ease);
  }
  .card:hover { box-shadow: var(--elev-2); transform: translateY(-2px); }
  .card-header { padding: var(--sp-4); border-bottom: 1px solid var(--border); display:flex; align-items:center; justify-content:space-between; gap:1rem; }
  .card-body   { padding: var(--sp-4); }
  .card-footer { padding: var(--sp-3) var(--sp-4); border-top: 1px solid var(--border); background: var(--surface-2); }

  /* Inputs / Forms */
  .field { display: grid; gap: .4rem; }
  .label { font-weight: 600; color: var(--text); }
  .input, .select, .textarea {
    padding: .7rem .9rem; border-radius: .8rem;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    transition: border-color var(--fast) var(--ease), box-shadow var(--fast) var(--ease);
  }
  .input:focus-visible, .select:focus-visible, .textarea:focus-visible {
    border-color: color-mix(in oklab, var(--primary) 50%, var(--border));
    box-shadow: 0 0 0 4px color-mix(in oklab, var(--primary) 18%, #0000);
  }
  .help { color: var(--text-soft); font-size: .9em; }

  /* Form with invalid inputs shows banner using :has */
  form:has(:invalid) .form-banner-invalid {
    display: grid;
  }
  .form-banner-invalid {
    display: none;
    grid-template-columns: auto 1fr;
    align-items: center;
    gap: .8rem;
    padding: .8rem 1rem;
    margin-bottom: var(--sp-3);
    border-radius: .8rem;
    background: color-mix(in oklab, var(--danger) 10%, var(--surface));
    border: 1px solid color-mix(in oklab, var(--danger) 30%, var(--border));
    color: color-mix(in oklab, var(--danger) 80%, #fff);
  }

  /* Table (CRUD lists) */
  .table-wrap { overflow: auto; border-radius: var(--r-lg); border: 1px solid var(--border); background: var(--surface); box-shadow: var(--elev-1); }
  table.data {
    width: 100%;
    font-size: .98rem;
  }
  .data thead th {
    position: sticky; top: 0; z-index: 1;
    background: linear-gradient(180deg, var(--surface), var(--surface-2));
    text-align: left; padding: .9rem 1rem;
    border-bottom: 1px solid var(--border);
    color: var(--text);
    font-weight: 700;
  }
  .data tbody td {
    padding: .8rem 1rem; border-bottom: 1px solid var(--border);
    color: var(--text-soft);
  }
  .data tbody tr:hover td { background: color-mix(in oklab, var(--primary) 6%, var(--surface)); color: var(--text); }
  .data .actions { display: flex; gap: .5rem; }

  /* Badges */
  .badge {
    display: inline-block; padding: .25rem .6rem; border-radius: 999px;
    font-weight: 600; font-size: .78rem;
    background: color-mix(in oklab, var(--primary) 15%, var(--surface-2));
    border: 1px solid color-mix(in oklab, var(--primary) 35%, var(--border));
    color: var(--primary);
  }

  /* Dialog / overlay card */
  .modal {
    position: fixed; inset: 0; display: grid; place-items: center;
    background: color-mix(in oklab, #000 35%, #0000);
    padding: var(--sp-6);
  }
  .modal > .card { width: min(720px, 100%); }

  /* Shimmer skeletons */
  .skeleton {
    --shine: linear-gradient(90deg, #0000, #00000015, #0000);
    background: var(--surface-2);
    position: relative; overflow: hidden;
  }
  .skeleton::after {
    content:""; position: absolute; inset:0;
    background-image: var(--shine);
    animation: shimmer 1.8s linear infinite;
  }

  /* Highlighted gradient border utility */
  .gradient-border {
    position: relative; border-radius: var(--r-lg);
  }
  .gradient-border::before {
    content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 1px;
    background: var(--grad);
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    pointer-events: none;
    animation: spin-grad 18s linear infinite;
  }

  /* Subtle floating cards */
  .float { animation: float 8s ease-in-out infinite; will-change: transform; }
}

/* -----------------------------
   Utilities
------------------------------*/
@layer utilities {
  .grid-auto-fit { display: grid; gap: var(--sp-4); grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
  .stack-2 { display: grid; gap: var(--sp-2); }
  .stack-3 { display: grid; gap: var(--sp-3); }
  .stack-4 { display: grid; gap: var(--sp-4); }

  .pad-3 { padding: var(--sp-3); }
  .pad-4 { padding: var(--sp-4); }
  .mx-auto { margin-inline: auto; }
  .mt-4 { margin-top: var(--sp-4); }
  .mb-4 { margin-bottom: var(--sp-4); }
  .text-soft { color: var(--text-soft); }
  .center { display: grid; place-items: center; }

  .hidden { display: none !important; }
  .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
}

/* -----------------------------
   Container Queries
------------------------------*/
@container page (max-width: 720px) {
  .card-header { flex-direction: column; align-items: flex-start; gap: .6rem; }
  .nav { gap: var(--sp-2); }
  .btn { width: 100%; }
}

/* -----------------------------
   Keyframes
------------------------------*/
@keyframes shimmer {
  from { transform: translateX(-100%); }
  to   { transform: translateX(100%); }
}
@keyframes spin-grad {
  to { --spin: 360deg; }
}
@keyframes float {
  0%, 100% { transform: translateY(0) }
  50% { transform: translateY(-6px) }
}

/* -----------------------------
   Motion Preferences
------------------------------*/
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* ==========================================================================
   Example structure (HTML hints)
   - Wrap pages with .container
   - Use .card for panels; .table-wrap > table.data for lists
   - Use .btn, .btn-outline, .btn-danger in action columns
   - Add .gradient-border to special panels and .halo on call-to-action buttons
========================================================================== */